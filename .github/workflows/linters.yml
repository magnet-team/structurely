name: Linters

 on:
   pull_request:
     branches:
       - "*"
   push:
     branches:
       - main

 jobs:
   standardrb:
     name: StandardRB Linter
     runs-on: ubuntu-latest
     if: "!contains(github.event.head_commit.message, 'ci skip')"
     steps:
       - uses: actions/checkout@v2
       - name: Set up Ruby 2.6
         uses: ruby/setup-ruby@v1
         with:
           ruby-version: 2.6.6
       - name: Cache gems
         uses: actions/cache@v2
         with:
           path: vendor/bundle
           key: ${{ runner.os }}-gems-${{ hashFiles('**/Gemfile.lock') }}
           restore-keys: |
             ${{ runner.os }}-gems-
       - name: Install gems
         run: |
           bundle config path vendor/bundle
           bundle install --jobs 4 --retry 3
       - name: Lint
         run: bin/lint
